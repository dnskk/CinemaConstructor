@model FilmViewModel

@{
    ViewData["Title"] = "Home Page";
}
<style>
    .footer:before {
        background-image: linear-gradient(90deg, #ff55a5 0%, #ff5860 100%) !important;
    }

    separator {
        background-image: linear-gradient(90deg, #ff55a5 0%, #ff5860 100%) !important;
    }
</style>


<!-- details -->
<section class="section details">
    <!-- details background -->
    <div class="details__bg" data-bg="img/home/home__bg.jpg"></div>
    <!-- end details background -->
    <!-- details content -->
    <div class="container">
        <div class="row">
            <!-- title -->
            <div class="col-12">
                <h1 class="details__title">@Model.Film.Title</h1>
            </div>
            <!-- end title -->
            <!-- content -->
            <div class="col-12 col-xl-6">
                <div class="card card--details">
                    <div class="row">
                        <!-- card cover -->
                        <div class="col-12 col-sm-4 col-md-4 col-lg-3 col-xl-5">
                            <div class="card__cover">
                                <img src="@Model.Poster" alt="">
                            </div>
                        </div>
                        <!-- end card cover -->
                        <!-- card content -->
                        <div class="col-12 col-sm-8 col-md-8 col-lg-9 col-xl-7">
                            <div class="card__content">

                                <ul class="card__meta">
                                    <li>
                                        <span>Genre:</span> <a href="#">@Model.Film.Genre</a>
                                    </li>
                                    <li><span>Release date:</span> @(Model.Film.ReleaseDate.ToString("MM\\/dd\\/yyyy"))</li>
                                    <li><span>Duration:</span> @Model.Film.Duration.ToString(@"hh\:mm")</li>
                                </ul>

                                <div class="card__description card__description--details">
                                    @Model.Film.Description
                                </div>
                            </div>
                        </div>
                        <!-- end card content -->
                    </div>
                </div>
            </div>
            <!-- end content -->
            <!-- player -->
            <div class="col-12 col-xl-6">
                <iframe style="height: 95%; width: 95%; border: none" src="@(Model.Film.TrailerUrl.Replace("watch?v=", "embed/"))">
                </iframe>
            </div>
            <div class="col-12" style="margin-top: 20px;">
                <div class="accordion" id="accordion">
                    @foreach (var group in Model.GroupedSessions)
                    {
                        var sessions = group.ToList().OrderBy(p => p.StartTime);
                        <div class="accordion__card">
                            <div class="card-header" id="headingOne">
                                <button type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    <span>@group.Key</span>
                                    <span>Available sessions</span>
                                </button>
                            </div>

                            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion">
                                <div class="card-body">
                                    <table class="accordion__list">
                                        <thead>
                                            <tr>
                                                <th>Start time</th>
                                                <th>Hall</th>
                                                <th>3D</th>
                                                <th>IMAX</th>
                                                <th>Price, ₽</th>
                                            </tr>
                                        </thead>

                                        <tbody>
                                            @foreach (var session in sessions)
                                            {
                                            <tr>
                                                <th>@session.StartTime.ToString("MM\\/dd\\/yyyy HH\\:mm")</th>
                                                <td>@session.Hall.Name</td>
                                                <td>@(session.Hall.Is3D ? "Yes" : "No")</td>
                                                <td>@(session.Hall.IsImax ? "Yes" : "No")</td>
                                                <td>@session.Price</td>
                                            </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    }

                    <div class="accordion__card">
                        <div class="card-header" id="headingTwo">
                            <button class="collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                <span>Season: 2</span>
                                <span>24 Episodes from Sep, 2005 until May, 2006</span>
                            </button>
                        </div>

                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                            <div class="card-body">
                                <table class="accordion__list">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Title</th>
                                            <th>Air Date</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr>
                                            <th>1</th>
                                            <td>Pilot</td>
                                            <td>Tuesday, November 16th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Paternity</td>
                                            <td>Tuesday, November 23rd, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Occam's Razor</td>
                                            <td>Tuesday, November 30th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Maternity</td>
                                            <td>Tuesday, December 7th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>5</th>
                                            <td>Damned If You Do</td>
                                            <td>Tuesday, December 14th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>6</th>
                                            <td>The Socratic Method</td>
                                            <td>Tuesday, December 21st, 2004</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="accordion__card">
                        <div class="card-header" id="headingThree">
                            <button class="collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                <span>Season: 3</span>
                                <span>24 Episodes from Sep, 2006 until May, 2007</span>
                            </button>
                        </div>

                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                            <div class="card-body">
                                <table class="accordion__list">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Title</th>
                                            <th>Air Date</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr>
                                            <th>1</th>
                                            <td>Pilot</td>
                                            <td>Tuesday, November 16th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Paternity</td>
                                            <td>Tuesday, November 23rd, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Occam's Razor</td>
                                            <td>Tuesday, November 30th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Maternity</td>
                                            <td>Tuesday, December 7th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>5</th>
                                            <td>Damned If You Do</td>
                                            <td>Tuesday, December 14th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>6</th>
                                            <td>The Socratic Method</td>
                                            <td>Tuesday, December 21st, 2004</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="accordion__card">
                        <div class="card-header" id="headingFour">
                            <button class="collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                <span>Season: 4</span>
                                <span>16 Episodes from Sep, 2007 until May, 2008</span>
                            </button>
                        </div>

                        <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordion">
                            <div class="card-body">
                                <table class="accordion__list">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Title</th>
                                            <th>Air Date</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr>
                                            <th>1</th>
                                            <td>Pilot</td>
                                            <td>Tuesday, November 16th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Paternity</td>
                                            <td>Tuesday, November 23rd, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Occam's Razor</td>
                                            <td>Tuesday, November 30th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Maternity</td>
                                            <td>Tuesday, December 7th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>5</th>
                                            <td>Damned If You Do</td>
                                            <td>Tuesday, December 14th, 2004</td>
                                        </tr>
                                        <tr>
                                            <th>6</th>
                                            <td>The Socratic Method</td>
                                            <td>Tuesday, December 21st, 2004</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<separator></separator>

<section class="section section--dark">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="section__title section__title--no-margin">How it works?</h2>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="how">
                    <span class="how__number">01</span>
                    <h3 class="how__title">Choose a movie</h3>
                    <p class="how__text">In our cinema you can watch any world premiere on the day of release. The list of films is available in the "NOW" section.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="how">
                    <span class="how__number">02</span>
                    <h3 class="how__title">Buy a ticket</h3>
                    <p class="how__text">Choose a place and pay for your ticket online using the payment method convenient for you.</p>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4">
                <div class="how">
                    <span class="how__number">03</span>
                    <h3 class="how__title">Enjoy movie</h3>
                    <p class="how__text">Just show the ticket code to the controller before entering the hall.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<separator></separator>

<section class="section section--bg" data-bg="img/section/section.jpg">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2 class="section__title">Expected premiere</h2>
            </div>
            @foreach (var film in Model.UpcomingFilms)
            {
                <div class="col-6 col-sm-4 col-lg-3 col-xl-2">
                    <div class="card">
                        <a href="/Film?companyId=@(Model.Company.Id)&filmId=@(film.Id)">
                            <div class="card__cover">
                                <img src="@Model.Posters[film.Id]" alt="">
                            </div>
                        </a>
                        <div class="card__content">
                            <h3 class="card__title"><a href="/Film?companyId=@(Model.Company.Id)&filmId=@(film.Id)">@film.Title</a></h3>
                            <span class="card__category">
                                <a href="#">@film.Genre</a>
                            </span>
                        </div>
                    </div>
                </div>
            }
            <div class="col-12">
                <a href="#" class="section__btn">Show more</a>
            </div>
        </div>
    </div>
</section>

@section scripts {
    <script>
        document.getElementById("headerHome").href = "/?companyId=@(Model.Company.Id)";
        document.getElementById("headerLogo").href = "/?companyId=@(Model.Company.Id)";

        document.getElementById("footerPhone").href = "tel:@(Model.Company.Phone)";
        document.getElementById("footerPhone").innerHTML = "@(Model.Company.Phone)";
        document.getElementById("footerEmail").href = "mailto:@(Model.Company.Email)";
        document.getElementById("footerEmail").innerHTML = "@(Model.Company.Email)";

        document.getElementById("footerFacebook").href = "@(Model.Company.FacebookLink)";
        document.getElementById("footerInstagram").href = "@(Model.Company.InstagramLink)";
    </script>
}
